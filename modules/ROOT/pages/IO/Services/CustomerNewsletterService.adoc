:table-caption!:
:example-caption!:
:source-highlighter: prettify
:sectids!:
[[io__customernewsletterservice]]
= CustomerNewsletterService

This service class contains functions used for handling newsletter related tasks. +
All public functions are available in the Twig template renderer.



===== Namespace

`IO\Services`





.Properties
|===
|Type |Name |Description

|xref:stable7@interface::Account.adoc#account_contracts_newsletterrepositorycontract[`NewsletterRepositoryContract`]
a|`$newsletterRepo`
|
|===


===== Methods

[source%nowrap, php, subs=+macros]
[#__construct]
----

public __construct($newsletterRepo)

----





CustomerNewsletterService constructor.

.*Parameters*
|===
|Type |Name |Description
|xref:stable7@interface::Account.adoc#account_contracts_newsletterrepositorycontract[`NewsletterRepositoryContract`]
a|`$newsletterRepo`
|
|===


[source%nowrap, php, subs=+macros]
[#savenewsletterdata]
----

public saveNewsletterData($email, $emailFolder, $firstName = &quot;&quot;, $lastName = &quot;&quot;)

----





Subscribes a single user to a newsletter

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[`string`^]
a|`$email`
|The email address of the customer

|link:http://php.net/int[`int`^]
a|`$emailFolder`
|Id for the type of newsletter

|link:http://php.net/string[`string`^]
a|`$firstName`
|Optional: First name of the customer

|link:http://php.net/string[`string`^]
a|`$lastName`
|Optional: Last name of the customer
|===


[source%nowrap, php, subs=+macros]
[#savemultiplenewsletterdata]
----

public saveMultipleNewsletterData($email, $emailFolders, $firstName = &quot;&quot;, $lastName = &quot;&quot;)

----





Subscribes a single user to multiple newsletters

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[`string`^]
a|`$email`
|The email address of the customer

|link:http://php.net/array[`array`^]
a|`$emailFolders`
|Ids for the types of newsletters

|link:http://php.net/string[`string`^]
a|`$firstName`
|Optional: First name of the customer

|link:http://php.net/string[`string`^]
a|`$lastName`
|Optional: Last name of the customer
|===


[source%nowrap, php, subs=+macros]
[#updateoptinstatus]
----

public updateOptInStatus($authString, $newsletterEmailId):link:http://php.net/bool[bool^]

----







.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[`string`^]
a|`$authString`
|Authorization string used for security purposes

|link:http://php.net/int[`int`^]
a|`$newsletterEmailId`
|Unique id of the newsletter registration
|===


[source%nowrap, php, subs=+macros]
[#deletenewsletterdatabyemail]
----

public deleteNewsletterDataByEmail($email, $emailFolder):link:http://php.net/bool[bool^]

----





Delete recipients from the newsletter
Not passing the optional parameter $emailFolder deletes the recipient from all email-folders

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[`string`^]
a|`$email`
|Email of the user

|link:http://php.net/int[`int`^]
a|`$emailFolder`
|Id of the type of newsletter
|===


