:table-caption!:
:example-caption!:
:source-highlighter: prettify
:sectids!:
[[io__orderservice]]
= OrderService





===== Namespace

`IO\Services`




.Constants
|===
|Type |Name |Value |Description

|link:http://php.net/array[array^]
a|`WRAPPED_ORDERITEM_TYPES`
|[1,2,3,9]
|
|link:http://php.net/array[array^]
a|`VISIBLE_ORDER_TYPES`
|[1,5]
|
|===


.Properties
|===
|Type |Name |Description

|xref:stable7@interface::Order.adoc#order_contracts_orderrepositorycontract[`OrderRepositoryContract`]
a|`$orderRepository`
||xref:IO/Services/BasketService.adoc#[`BasketService`]
a|`$basketService`
||xref:IO/Services/SessionStorageService.adoc#[`SessionStorageService`]
a|`$sessionStorage`
||xref:stable7@interface::Frontend.adoc#frontend_contracts_frontendpaymentmethodrepositorycontract[`FrontendPaymentMethodRepositoryContract`]
a|`$frontendPaymentMethodRepository`
||xref:stable7@interface::Account.adoc#account_contracts_addressrepositorycontract[`AddressRepositoryContract`]
a|`$addressRepository`
||xref:IO/Services/UrlService.adoc#[`UrlService`]
a|`$urlService`
||xref:IO/Services/CheckoutService.adoc#[`CheckoutService`]
a|`$checkoutService`
||xref:IO/Services/CustomerService.adoc#[`CustomerService`]
a|`$customerService`
||link:http://php.net/string[`string`^]
a|`$pluginNamespace`
|
|===


===== Methods

[source%nowrap, php, subs=+macros]
[#__construct]
----

public __construct($orderRepository, $basketService, $sessionStorage, $frontendPaymentMethodRepository, $addressRepository, $urlService, $checkoutService, $customerService)

----





OrderService constructor.

.*Parameters*
|===
|Type |Name |Description
|xref:stable7@interface::Order.adoc#order_contracts_orderrepositorycontract[`OrderRepositoryContract`]
a|`$orderRepository`
|

|xref:IO/Services/BasketService.adoc#[`BasketService`]
a|`$basketService`
|

|xref:IO/Services/IO/Services/SessionStorageService.adoc#[`SessionStorageService`]
a|`$sessionStorage`
|

|xref:stable7@interface::Frontend.adoc#frontend_contracts_frontendpaymentmethodrepositorycontract[`FrontendPaymentMethodRepositoryContract`]
a|`$frontendPaymentMethodRepository`
|

|xref:stable7@interface::Account.adoc#account_contracts_addressrepositorycontract[`AddressRepositoryContract`]
a|`$addressRepository`
|

|xref:IO/Services/IO/Services/UrlService.adoc#[`UrlService`]
a|`$urlService`
|

|xref:IO/Services/IO/Services/CheckoutService.adoc#[`CheckoutService`]
a|`$checkoutService`
|

|xref:IO/Services/IO/Services/CustomerService.adoc#[`CustomerService`]
a|`$customerService`
|
|===


[source%nowrap, php, subs=+macros]
[#placeorder]
----

public placeOrder():xref:IO/Models/LocalizedOrder.adoc#[LocalizedOrder]

----





Place an order

[source%nowrap, php, subs=+macros]
[#executepayment]
----

public executePayment($orderId, $paymentId):link:http://php.net/array[array^]

----





Execute the payment for a given order.

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$orderId`
|The order id to execute payment for

|link:http://php.net/int[`int`^]
a|`$paymentId`
|The MoP-ID to execute
|===


[source%nowrap, php, subs=+macros]
[#findorderbyid]
----

public findOrderById($orderId, $wrap = true):link:http://php.net/mixed[mixed^]

----





Find an order by ID

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$orderId`
|

|link:http://php.net/bool[`bool`^]
a|`$wrap`
|
|===


[source%nowrap, php, subs=+macros]
[#findorderbyaccesskey]
----

public findOrderByAccessKey()

----







[source%nowrap, php, subs=+macros]
[#getordersforcontact]
----

public getOrdersForContact($contactId, $page = 1, $items = 50, $filters = [], $wrapped = true): xref:stable7@interface::Miscellaneous.adoc#miscellaneous_models_paginatedresult[PaginatedResult]

----





Get a list of orders for a contact

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$contactId`
|

|link:http://php.net/int[`int`^]
a|`$page`
|

|link:http://php.net/int[`int`^]
a|`$items`
|

|link:http://php.net/array[`array`^]
a|`$filters`
|

|link:http://php.net/bool[`bool`^]
a|`$wrapped`
|
|===


[source%nowrap, php, subs=+macros]
[#getorderscompact]
----

public getOrdersCompact()

----







[source%nowrap, php, subs=+macros]
[#getlatestorderforcontact]
----

public getLatestOrderForContact($contactId):xref:IO/Models/LocalizedOrder.adoc#[LocalizedOrder]

----





Get the last order created by the current contact

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$contactId`
|
|===


[source%nowrap, php, subs=+macros]
[#getorderpropertybyorderid]
----

public getOrderPropertyByOrderId()

----







[source%nowrap, php, subs=+macros]
[#isreturnactive]
----

public isReturnActive()

----







[source%nowrap, php, subs=+macros]
[#createorderreturn]
----

public createOrderReturn()

----







[source%nowrap, php, subs=+macros]
[#getreturnableitems]
----

public getReturnableItems($order):link:http://php.net/array[array^]

----







.*Parameters*
|===
|Type |Name |Description
|xref:stable7@interface::Order.adoc#order_models_order[`Order`]
a|`$order`
|
|===


[source%nowrap, php, subs=+macros]
[#getpaymentmethodlistforswitch]
----

public getPaymentMethodListForSwitch($currentPaymentMethodId, $orderId = null):xref:IO/Services/Illuminate/Support/Collection.adoc#[Collection]

----





List all payment methods available for switch in MyAccount

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$currentPaymentMethodId`
|

|         xref:5.0.0@plugin-null::null.adoc#[`null`]
a|`$orderId`
|
|===


[source%nowrap, php, subs=+macros]
[#complete]
----

public complete($order)

----





Do steps after creating the order

.*Parameters*
|===
|Type |Name |Description
|xref:stable7@interface::Order.adoc#order_models_order[`Order`]
a|`$order`
|
|===


