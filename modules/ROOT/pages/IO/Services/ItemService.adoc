:table-caption!:
:example-caption!:
:source-highlighter: prettify
:sectids!:
[[io__itemservice]]
= ItemService

This service class contains functions related to common item tasks. +
All public functions are available in the Twig template renderer.



===== Namespace

`IO\Services`





.Properties
|===
|Type |Name |Description

| xref:stable7@interface::Miscellaneous.adoc#miscellaneous_plugin_application[`Application`]
a|`$app`
||xref:stable7@interface::Item.adoc#item_contracts_itemdatalayerrepositorycontract[`ItemDataLayerRepositoryContract`]
a|`$itemRepository`
||         xref:5.0.0@plugin-::.adoc#[``]
a|`$sessionStorageRepository`
|SessionStorageRepositoryContract|link:http://php.net/array[`array`^]
a|`$additionalItemSortingMap`
||         xref:5.0.0@plugin-::.adoc#[``]
a|`$cache`
|
|===


===== Methods

[source%nowrap, php, subs=+macros]
[#__construct]
----

public __construct($app, $itemRepository, $sessionStorageRepository)

----





ItemService constructor.

.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Miscellaneous.adoc#miscellaneous_plugin_application[`Application`]
a|`$app`
|

|xref:stable7@interface::Item.adoc#item_contracts_itemdatalayerrepositorycontract[`ItemDataLayerRepositoryContract`]
a|`$itemRepository`
|

|xref:stable7@interface::Webshop.adoc#webshop_contracts_sessionstoragerepositorycontract[`SessionStorageRepositoryContract`]
a|`$sessionStorageRepository`
|
|===


[source%nowrap, php, subs=+macros]
[#getitem]
----

public getItem($itemId):link:http://php.net/array[array^]

----





Get an item by ID

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|An item id
|===


[source%nowrap, php, subs=+macros]
[#getitems]
----

public getItems($itemIds):link:http://php.net/array[array^]

----





Get a list of items with the specified item ids

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/array[`array`^]
a|`$itemIds`
|List of item ids
|===


[source%nowrap, php, subs=+macros]
[#getitemimage]
----

public getItemImage($itemId):link:http://php.net/string[string^]

----







.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|An item id
|===


[source%nowrap, php, subs=+macros]
[#getvariation]
----

public getVariation($variationId):link:http://php.net/array[array^]

----





Get an item variation by id

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$variationId`
|An variation id
|===


[source%nowrap, php, subs=+macros]
[#getvariations]
----

public getVariations($variationIds):link:http://php.net/array[array^]

----





Get a list of item variations with the specified variation ids

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/array[`array`^]
a|`$variationIds`
|A list of variation idss
|===


[source%nowrap, php, subs=+macros]
[#getvariationids]
----

public getVariationIds($itemId):link:http://php.net/array[array^]

----





Get a list of active and salable variation ids associated with an item

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|An item id
|===


[source%nowrap, php, subs=+macros]
[#getvariationlist]
----

public getVariationList($itemId, $withPrimary = false):link:http://php.net/array[array^]

----





Get a list of variation ids associated with a specific item

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|An item id

|link:http://php.net/bool[`bool`^]
a|`$withPrimary`
|Optional: If true, load base variation too (Default: false)
|===


[source%nowrap, php, subs=+macros]
[#getvariationimage]
----

public getVariationImage($variationId, $imageAccessor = &quot;urlPreview&quot;):link:http://php.net/string[string^]

----

[WARNING]
.Deprecated! 
====

This method will not be supported in the future. Please refrain from using it as soon as possible.

====




Get image url of a variation

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$variationId`
|An variation id

|link:http://php.net/string[`string`^]
a|`$imageAccessor`
|Optional: Key to image (Default: 'urlPreview')
|===


[source%nowrap, php, subs=+macros]
[#getitemforcategory]
----

public getItemForCategory($catID, $params = [], $page = 1):link:http://php.net/array[array^]

----





Get all items for a specific category

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$catID`
|A category id

|link:http://php.net/array[`array`^]
a|`$params`
|Optional: Parameters for Elastic Search, only itemsPerPage is used

|link:http://php.net/int[`int`^]
a|`$page`
|Optional: What page to get (Default: 1)
|===


[source%nowrap, php, subs=+macros]
[#getvariationattributemap]
----

public getVariationAttributeMap($itemId):link:http://php.net/array[array^]

----





List the attributes of an item variation

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|Optional: An item id
|===


[source%nowrap, php, subs=+macros]
[#getvariationissalable]
----

public getVariationIsSalable($variationId):link:http://php.net/bool[bool^]

----





Check, if variation is salable, meaning it has stock, has a price etc.

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$variationId`
|Optional: A variation id
|===


[source%nowrap, php, subs=+macros]
[#getattributenamemap]
----

public getAttributeNameMap($itemId):link:http://php.net/array[array^]

----





Get a list containing attributes and units related to an item

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|Optional: An item id
|===


[source%nowrap, php, subs=+macros]
[#getitemurl]
----

public getItemURL($itemId):xref:stable7@interface::Item.adoc#item_models_record[Record]

----

[WARNING]
.Deprecated! 
====

Use UrlService instead

====




Get the item URL

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|An item id
|===


[source%nowrap, php, subs=+macros]
[#getattributename]
----

public getAttributeName($attributeId):link:http://php.net/string[string^]

----





Get the name of an attribute by id

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$attributeId`
|Optional: An attribute id
|===


[source%nowrap, php, subs=+macros]
[#getattributevaluename]
----

public getAttributeValueName($attributeValueId):link:http://php.net/string[string^]

----





Get the name of an attribute value by id

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$attributeValueId`
|Optional: An attribute value's id
|===


[source%nowrap, php, subs=+macros]
[#getitemcrosssellinglist]
----

public getItemCrossSellingList($itemId, $crossSellingType = &quot;similar&quot;):link:http://php.net/array[array^]

----





Get a list of cross-selling items for the specified item id

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$itemId`
|Optional: An item's id

|link:http://php.net/string[`string`^]
a|`$crossSellingType`
|Optional: The cross selling type (Default: 'similar')
|===


[source%nowrap, php, subs=+macros]
[#getitemconditiontext]
----

public getItemConditionText($conditionId):link:http://php.net/string[string^]

----





Get the text for a specific item condition

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$conditionId`
|An item condition's id
|===


[source%nowrap, php, subs=+macros]
[#getlatestitems]
----

public getLatestItems($limit = 5, $categoryId):xref:stable7@interface::Item.adoc#item_models_recordlist[RecordList]

----





Get a list of the latest items

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[`int`^]
a|`$limit`
|Optional: Maximum number of returned items (Default: 5)

|link:http://php.net/int[`int`^]
a|`$categoryId`
|Optional: From which category should items be returned?
|===


[source%nowrap, php, subs=+macros]
[#searchitems]
----

public searchItems($searchString, $params = [], $page = 1):link:http://php.net/array[array^]

----





Search for items using a search string and return a result

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[`string`^]
a|`$searchString`
|A user inputted search string

|link:http://php.net/array[`array`^]
a|`$params`
|Optional: Parameters for elastic search query, only itemsPerPage is used

|link:http://php.net/int[`int`^]
a|`$page`
|Optional: Page number for pagination
|===


[source%nowrap, php, subs=+macros]
[#getadditionalitemsorting]
----

public getAdditionalItemSorting():link:http://php.net/array[array^]

----





Get additional sortings

[source%nowrap, php, subs=+macros]
[#addadditionalitemsorting]
----

public addAdditionalItemSorting($key, $translationKey)

----





Add an additional sorting

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[`string`^]
a|`$key`
|A sorting key

|link:http://php.net/string[`string`^]
a|`$translationKey`
|The translation key for the sorting
|===


[source%nowrap, php, subs=+macros]
[#frommemorycache]
----

public fromMemoryCache()

----







[source%nowrap, php, subs=+macros]
[#resetmemorycache]
----

public resetMemoryCache($key = null)

----







.*Parameters*
|===
|Type |Name |Description
|         xref:5.0.0@plugin-::.adoc#[``]
a|`$key`
|
|===


